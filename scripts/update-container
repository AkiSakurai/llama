#!/bin/bash
set -eu
root=$(readlink -f "$(dirname "$0")/..")
cd "$root"
container="$1"
path="${2-images/$container}"
. scripts/_vars
scripts/build-container "$container" "$path"
repository_tag="$repository_url:$container"
aws lambda update-function-code \
    --function-name "$container" \
    --image-uri "${repository_tag}" >/dev/null
scripts/wait-for-function "$container"
